---
phase: 01-design-tokens-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [apps/frontend/src/renderer/styles/globals.css, .planning/phases/01-design-tokens-foundation/TOKENS.md]
autonomous: true
---

<objective>
Estabelecer sistema de design tokens centralizado com cores HSL, substituindo o sistema atual por uma paleta moderna e consistente baseada no ui.md de referência.

Purpose: Criar foundation de tokens CSS que será base para todas as fases subsequentes de modernização visual. Sistema de cores HSL permite ajustes dinâmicos e temas flexíveis.

Output: Arquivo globals.css atualizado com sistema HSL simplificado (light/dark), documentação de tokens, e verificação de funcionamento com Tailwind CSS v4.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/STACK.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/CONVENTIONS.md
@/Users/guilhermevarela/Documents/Projetos/Auto-Claude/ui.md (lines 1-350)
@apps/frontend/src/renderer/styles/globals.css
@apps/frontend/postcss.config.cjs

**Contexto técnico:**
- Tailwind CSS 4.1.17 via @tailwindcss/postcss (config inline no CSS)
- Globals.css atual tem 7 temas (oscura, dusk, lime, ocean, retro, neo, forest) com 1700+ linhas
- Sistema atual usa CSS variables mas com valores HEX/RGB misturados
- ui.md referência usa sistema HSL puro e simples (light/dark base)

**Estratégia de modernização:**
- Simplificar para light/dark base (conforme ui.md), mantendo capacidade de adicionar temas futuros
- Trocar valores HEX/RGB por HSL para maior flexibilidade
- Manter estrutura @theme do Tailwind v4
- Preservar animações e utilidades customizadas existentes
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refatorar globals.css com sistema HSL do ui.md</name>
  <files>apps/frontend/src/renderer/styles/globals.css</files>
  <action>
    Substituir o sistema de cores atual por um sistema HSL simplificado baseado no ui.md:

    1. **Manter estrutura inicial** (linhas 1-98):
       - @import "tailwindcss"
       - @plugin "@tailwindcss/typography"
       - @theme block com fonts, border radius, animations

    2. **Substituir CSS variables** (:root e .dark):
       - REMOVER todos os data-theme variants (dusk, lime, ocean, retro, neo, forest) - simplificar para light/dark base
       - Trocar valores HEX/RGB por valores HSL do ui.md (linhas 244-348 do ui.md)
       - :root (light mode):
         ```css
         --background: 0 0% 100%;
         --foreground: 240 10% 3.9%;
         --card: 0 0% 100%;
         --card-foreground: 240 10% 3.9%;
         --popover: 0 0% 100%;
         --popover-foreground: 240 10% 3.9%;
         --primary: 228 100% 50%;
         --primary-foreground: 0 0% 100%;
         --secondary: 240 4.8% 95.9%;
         --secondary-foreground: 240 5.9% 10%;
         --muted: 240 4.8% 95.9%;
         --muted-foreground: 240 3.8% 46.1%;
         --accent: 240 4.8% 95.9%;
         --accent-foreground: 240 5.9% 10%;
         --destructive: 0 84.2% 60.2%;
         --destructive-foreground: 0 0% 98%;
         --border: 240 5.9% 90%;
         --input: 240 5.9% 90%;
         --input-background: 240 4.8% 95.9%;
         --ring: 228 100% 50%;
         --radius: 0.5rem;

         /* Semantic colors */
         --success: 142 76% 36%;
         --success-foreground: 0 0% 100%;
         --warning: 48 96% 53%;
         --warning-foreground: 240 10% 3.9%;
         --info: 221 83% 53%;
         --info-foreground: 0 0% 100%;

         /* Shadows */
         --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
         --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
         --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
         --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 8px 10px -6px rgba(0, 0, 0, 0.04);
         --shadow-focus: 0 0 0 3px rgba(59, 130, 246, 0.2);
         ```
       - .dark:
         ```css
         --background: 240 10% 3.9%;
         --foreground: 240 4.8% 95.9%;
         --card: 240 10% 3.9%;
         --card-foreground: 0 0% 98%;
         --popover: 0 0% 9%;
         --popover-foreground: 0 0% 98%;
         --primary: 228 100% 50%;
         --primary-foreground: 0 0% 100%;
         --secondary: 240 3.7% 15.9%;
         --secondary-foreground: 0 0% 98%;
         --muted: 240 5.9% 10%;
         --muted-foreground: 240 4.4% 58%;
         --accent: 240 5.9% 10%;
         --accent-foreground: 0 0% 98%;
         --destructive: 0 62.8% 30.6%;
         --destructive-foreground: 0 0% 98%;
         --border: 240 3.7% 15.9%;
         --input: 240 3.7% 15.9%;
         --input-background: 60 2% 18%;
         --ring: 228 100% 50%;
         --radius: 0.5rem;

         /* Semantic colors */
         --success: 142 71% 45%;
         --success-foreground: 0 0% 98%;
         --warning: 48 96% 53%;
         --warning-foreground: 240 10% 3.9%;
         --info: 221 83% 53%;
         --info-foreground: 0 0% 98%;

         /* Shadows */
         --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
         --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.7);
         --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.8);
         --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.9);
         --shadow-focus: 0 0 0 2px rgba(59, 130, 246, 0.3);
         ```

    3. **Preservar utilidades existentes** (após CSS variables):
       - Body styles (linhas 1030-1042)
       - Card styles (linhas 1049-1088)
       - Scrollbar customizado (linhas 1091-1117)
       - Electron drag areas (linhas 1120-1126)
       - Focus ring (linhas 1129-1136)
       - Kanban column colors (linhas 1139-1157)
       - Todas as animações customizadas (progress-glow-sweep, task-card-glow, etc.)
       - UI scale system (linhas 1676-1710)

    4. **Garantir Tailwind v4 reconhece as cores**:
       - Verificar que @theme block mapeia cores para Tailwind (linhas 8-98)
       - Manter estrutura --color-primary: var(--primary)

    IMPORTANTE:
    - NÃO remover nenhuma animação ou utilidade customizada existente
    - NÃO modificar @theme block (apenas CSS variables em :root e .dark)
    - Manter todos os estilos de TaskCard, drag-and-drop, etc
    - Simplificar de 7 temas para 2 (light/dark base) conforme ui.md
  </action>
  <verify>
    - cd apps/frontend && npm run build
    - Build completa sem erros de CSS
    - Verificar que tamanho do globals.css reduziu (de ~1700 linhas para ~600-800 linhas)
    - grep --color=always "hsl(var(--primary))" apps/frontend/src/renderer/styles/globals.css (deve existir no @theme)
  </verify>
  <done>
    - globals.css refatorado com sistema HSL do ui.md
    - Reduzido de 7 temas para light/dark base
    - Build passa sem erros
    - Todas as utilidades customizadas preservadas
  </done>
</task>

<task type="auto">
  <name>Task 2: Criar documentação de tokens CSS</name>
  <files>.planning/phases/01-design-tokens-foundation/TOKENS.md</files>
  <action>
    Criar arquivo TOKENS.md documentando o sistema de design tokens:

    # Design Tokens - Auto-Claude

    ## Cores (HSL System)

    ### Cores Base
    | Token | Light Mode | Dark Mode | Uso |
    |-------|------------|-----------|-----|
    | --background | 0 0% 100% | 240 10% 3.9% | Background principal |
    | --foreground | 240 10% 3.9% | 240 4.8% 95.9% | Texto principal |
    | --card | 0 0% 100% | 240 10% 3.9% | Background de cards |
    | --primary | 228 100% 50% | 228 100% 50% | Cor de marca/ações |
    | --secondary | 240 4.8% 95.9% | 240 3.7% 15.9% | Elementos secundários |
    | --muted | 240 4.8% 95.9% | 240 5.9% 10% | Texto desabilitado |
    | --accent | 240 4.8% 95.9% | 240 5.9% 10% | Hover states |
    | --destructive | 0 84.2% 60.2% | 0 62.8% 30.6% | Ações destrutivas |

    ### Cores Semânticas
    | Token | Light Mode | Dark Mode | Uso |
    |-------|------------|-----------|-----|
    | --success | 142 76% 36% | 142 71% 45% | Sucesso, aprovação |
    | --warning | 48 96% 53% | 48 96% 53% | Avisos, atenção |
    | --info | 221 83% 53% | 221 83% 53% | Informação |

    ### Bordas e Inputs
    | Token | Light Mode | Dark Mode | Uso |
    |-------|------------|-----------|-----|
    | --border | 240 5.9% 90% | 240 3.7% 15.9% | Bordas gerais |
    | --input | 240 5.9% 90% | 240 3.7% 15.9% | Bordas de inputs |
    | --ring | 228 100% 50% | 228 100% 50% | Focus ring |

    ## Border Radius
    | Token | Valor | Uso |
    |-------|-------|-----|
    | --radius | 0.5rem (8px) | Base radius |
    | --radius-sm | 4px | Small elements |
    | --radius-md | 8px | Medium elements |
    | --radius-lg | 12px | Large cards |
    | --radius-xl | 16px | Extra large |
    | --radius-full | 9999px | Pills, badges |

    ## Sombras
    | Token | Light Mode | Dark Mode |
    |-------|------------|-----------|
    | --shadow-sm | 0 1px 2px rgba(0,0,0,0.05) | 0 1px 2px rgba(0,0,0,0.6) |
    | --shadow-md | 0 4px 6px rgba(0,0,0,0.07) | 0 4px 6px rgba(0,0,0,0.7) |
    | --shadow-lg | 0 10px 15px rgba(0,0,0,0.08) | 0 10px 15px rgba(0,0,0,0.8) |
    | --shadow-xl | 0 20px 25px rgba(0,0,0,0.08) | 0 20px 25px rgba(0,0,0,0.9) |
    | --shadow-focus | 0 0 0 3px rgba(59,130,246,0.2) | 0 0 0 2px rgba(59,130,246,0.3) |

    ## Uso no Tailwind CSS v4

    O sistema usa Tailwind v4 com configuração inline via @theme:

    ```css
    @theme {
      --color-primary: var(--primary);
      --color-background: var(--background);
      /* ... */
    }
    ```

    Classes disponíveis automaticamente:
    - `bg-primary` → `background: hsl(var(--primary))`
    - `text-foreground` → `color: hsl(var(--foreground))`
    - `border-border` → `border-color: hsl(var(--border))`

    ## Adicionando Novos Temas

    Para adicionar um tema customizado (ex: "ocean"):

    1. Adicionar seletor após .dark:
    ```css
    [data-theme="ocean"] {
      --primary: 221 83% 53%; /* Blue */
      --background: 220 26% 14%; /* Dark blue */
      /* ... outros tokens */
    }
    ```

    2. Aplicar no HTML/body:
    ```tsx
    document.body.dataset.theme = "ocean";
    ```

    ## Migrando Componentes Existentes

    Os componentes existentes continuam funcionando pois mantemos:
    - Mesmas variáveis CSS (--primary, --background, etc)
    - Mesmo mapeamento no @theme do Tailwind
    - Mesmas classes utilitárias (bg-primary, text-foreground)

    A única mudança é interna: valores agora são HSL puros ao invés de HEX/RGB.
  </action>
  <verify>
    - cat .planning/phases/01-design-tokens-foundation/TOKENS.md | wc -l (deve ter ~100 linhas)
    - grep --color=always "HSL System" .planning/phases/01-design-tokens-foundation/TOKENS.md (deve existir)
  </verify>
  <done>
    - Documentação completa de tokens criada
    - Inclui tabelas de referência para cores, sombras, radius
    - Instruções de como adicionar temas customizados
    - Guia de migração para componentes
  </done>
</task>

<task type="auto">
  <name>Task 3: Verificar funcionamento do Tailwind com novos tokens</name>
  <files>apps/frontend/src/renderer/styles/globals.css</files>
  <action>
    Verificar que o sistema de tokens está funcionando corretamente com Tailwind CSS v4:

    1. Rodar build completo:
       ```bash
       cd apps/frontend && npm run build
       ```

    2. Verificar que classes Tailwind estão sendo geradas corretamente:
       ```bash
       # Verificar que Tailwind processou as cores
       grep -r "bg-primary" apps/frontend/out/ 2>/dev/null || echo "Build output not found (OK)"
       ```

    3. Verificar estrutura final do globals.css:
       ```bash
       # Deve ter @theme, :root, .dark, e utilidades
       grep -c "@theme" apps/frontend/src/renderer/styles/globals.css  # = 1
       grep -c ":root {" apps/frontend/src/renderer/styles/globals.css # >= 1
       grep -c ".dark {" apps/frontend/src/renderer/styles/globals.css  # >= 1
       ```

    4. Confirmar que não há erros PostCSS/Tailwind:
       ```bash
       # Build deve completar sem warnings de CSS
       npm run build 2>&1 | grep -i "error" || echo "No errors found"
       ```

    Se houver erros, investigar e corrigir antes de completar a task.
  </action>
  <verify>
    - npm run build completa com exit code 0
    - Nenhum erro de PostCSS ou Tailwind no output
    - globals.css tem estrutura correta (@theme + :root + .dark)
    - Tamanho do arquivo reduziu (simplifição bem-sucedida)
  </verify>
  <done>
    - Build passa sem erros
    - Tailwind reconhece todas as cores HSL
    - Sistema de tokens funcionando end-to-end
    - Pronto para Fase 2 (Typography System)
  </done>
</task>

</tasks>

<verification>
Antes de declarar plano completo:
- [ ] npm run build (apps/frontend) completa sem erros
- [ ] globals.css usa valores HSL puros (não HEX/RGB)
- [ ] Sistema simplificado para light/dark (sem 7 temas)
- [ ] TOKENS.md documenta sistema completo
- [ ] Tailwind CSS v4 @theme mapeando cores corretamente
- [ ] Nenhuma animação ou utilidade customizada foi removida
</verification>

<success_criteria>
- Todos as tasks completadas
- Build passa sem erros ou warnings
- globals.css refatorado com sistema HSL do ui.md
- Documentação de tokens criada
- Sistema de cores funcionando com Tailwind v4
- Redução de ~1700 para ~600-800 linhas (simplificação)
- Foundation estabelecida para próximas fases
</success_criteria>

<output>
Após completar, criar `.planning/phases/01-design-tokens-foundation/01-01-SUMMARY.md`
</output>
